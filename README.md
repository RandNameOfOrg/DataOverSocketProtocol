# DoSP Protocol Specification

**DoSP** (Default or Simple Protocol) ‚Äî TCP-–ø—Ä–æ—Ç–æ–∫–æ–ª, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ –ø–æ—Ä—Ç—É **7744**. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Å—ã–ª–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.

---

## üì¶ Message Format

```

\[1 byte TYPE] \[4 bytes LENGTH] \[optional 4 bytes DST\_IP] \[PAYLOAD]

````

- `TYPE`: –¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è (1 –±–∞–π—Ç)
- `LENGTH`: –î–ª–∏–Ω–∞ –ø–∞–∫–µ—Ç–∞, –≤–∫–ª—é—á–∞—è payload –∏ DST_IP (–µ—Å–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
- `DST_IP`: –ê–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- `PAYLOAD`: –ü–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞

---

## üî§ Message Types

| Hex    | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ              | Mnemonic* |
|--------|-------------------------|-----------|
| `0x01` | –°–æ–æ–±—â–µ–Ω–∏–µ               | `MSG`     |
| `0x02` | Ping                    | `PING`    |
| `0x03` | –û—Ç–ø—Ä–∞–≤–∫–∞ –¥—Ä—É–≥–æ–º—É        | `S2C`     |
| `0x04` | –ü–æ–ª—É—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤      | `GCL`     |
| `0x05` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é       | `FN`      |
| `0x06` | Save/Load data          | `SD`      |
| `0x07` | –ó–∞–ø—Ä–æ—Å IP               | `RQIP`    |
| `0x0F` | –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤. –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ | `R4C`     |
| `0x10` | –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞           | `SA`      |
| `0x11` | –ü–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ    | `EXIT`    |
| `0x12` | –û—à–∏–±–∫–∞                  | `ERR`     |
| `0x13` | –ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π IP          | `AIP`     |
| `0x14` | HandShake               | `HSK`     |

types before 0x20 are reserved for build-in functions
other types are reserved for future use
---

## üåê VIPv4 ‚Äî Virtual IP v4

–ö–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π IPv4-–∞–¥—Ä–µ—Å –ø–æ —à–∞–±–ª–æ–Ω—É:

`"7.10.0.{x}"  # x –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 2`

* –ê–¥—Ä–µ—Å –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (`AIP`)
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤ `S2C`
* IP –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–¥–∞–Ω –∫–∞–∫ `10.0.0.{x}`, `192.168.1.{x}` –∏ —Ç.–¥.

---

## üß† Assign IP example

–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞:

```python
server = Server(ip_template="10.0.0.{x}")
server.start()
```

–ö–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—Ç IP –≤–∏–¥–∞ `10.0.0.2`, `10.0.0.3`, ‚Ä¶

---

## TODO

- [ ] allow `SD` (Save/Load data) in server
- [ ] encrypt messages between 2 clients